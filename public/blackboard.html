<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>公告栏</title>
        <link rel="stylesheet" href="./stylesheets/materialize.min.css">
        <script src='./javascripts/jquery-3.3.1.min.js'></script>
        <script src='./javascripts/materialize.min.js'></script>
        <script>
            function timedCount() {
                console.log(c);
                console.log($('#carousel').carousel().center);
                if (c === 0) {
                    $('#carousel').carousel('next');
                    c = 10;
                }
                c = c - 1;
                t = setTimeout(`timedCount()`,1000);
            };
            $(document).ready(function() {
                // 读取JSON文件中的setting，渲染轮播插件
                $.getJSON('/setting', function(setting) {
                    // console.log(setting);
                    for (let imageInfomation of setting.pictureInfomations) {
                        $('#carousel').append(`<a class="carousel-item"><img src="${imageInfomation.filepath}"></a>`);
                    }
                    $('#carousel').carousel({full_width: true});
                    c = setting.pictureInfomations[1].displayTime;
                    timedCount();
                });
            });
        </script>
    </head>
    <body>
        <div id="carousel" class="carousel carousel-slider center" data-indicators="true">
        </div>
    </body>
</html>